<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue-it Implementation Test</title>

    <script type='text/javascript' src='//static.queue-it.net/script/queueclient.min.js'></script>
    <script
       data-queueit-c='1118'
       type='text/javascript'
       src='//static.queue-it.net/script/queueconfigloader.min.js'>
    </script>
</head>
<body>
    <h1>Test page for Keita</h1>
    <p>Use the buttons below to test different trigger scenarios and integration logic.</p>

    <hr>

    <section>
        <h2>Scenario 1: URL Parameter Trigger</h2>
        <p>This button redirects you to a URL containing a specific parameter.</p>
        <a href="?target=exclusive-sale" style="display: inline-block; padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px;">
            Go to Exclusive Sale
        </a>
    </section>

    <br>

    <section>
        <h2>Scenario 2: JavaScript API Trigger</h2>
        <p>This button calls the Queue-it API manually to check triggers without reloading.</p>
        <button id="checkout-button" style="padding: 10px 20px; cursor: pointer; border: 1px solid #333; border-radius: 4px; background-color: #28a745; color: white;">
            Proceed to Checkout (JS Trigger)
        </button>
    </section>

<script>
    // 1. 最初は false（これで読み込み時は AND条件が揃わないので飛ばない）
    window.isClicked = false;

    document.getElementById('checkout-button').addEventListener('click', function() {
        console.log('Button clicked!');
        
        // 2. 変数を true に変える（これで AND条件が揃う）
        window.isClicked = true;

        if (window.queueViewModel) {
            // 3. Queue-itに「今すぐ条件を再チェックして！」と命令する
            window.queueViewModel.trigger();
        } else {
            console.log('Queue-it engine is not initialized yet.');
        }
    });
</script>

</body>
</html>
