<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue-it Implementation Test</title>

    <script type='text/javascript' src='//static.queue-it.net/script/queueclient.min.js'></script>
    <script
       data-queueit-c='1118'
       type='text/javascript'
       src='//static.queue-it.net/script/queueconfigloader.min.js'>
    </script>
</head>
<body>
    <h1>Test page for Keita</h1>
    <p>Use the buttons below to test different trigger scenarios and integration logic.</p>

    <hr>

    <section>
        <h2>Scenario 1: URL Parameter Trigger</h2>
        <p>This button redirects you to a URL containing a specific parameter.</p>
        <a href="?target=exclusive-sale" style="display: inline-block; padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px;">
            Go to Exclusive Sale
        </a>
    </section>

    <br>

    <section>
        <h2>Scenario 2: JavaScript API Trigger</h2>
        <p>This button calls the Queue-it API manually to check triggers without reloading.</p>
        <button id="checkout-button" style="padding: 10px 20px; cursor: pointer; border: 1px solid #333; border-radius: 4px; background-color: #28a745; color: white;">
            Proceed to Checkout (JS Trigger)
        </button>
    </section>

   <script>
    // 1. 最初は false に設定（これで読み込み時はトリガーされない）
    window.isClicked = false;

    document.getElementById('checkout-button').addEventListener('click', function() {
        console.log('Checkout button clicked. Changing variable and initiating Queue-it...');
        
        // 2. ボタンが押されたら変数を true に変える（合図を送る）
        window.isClicked = true;
        
        if (window.queueViewModel) {
            console.log('Queue-it trigger() is being called.');
            
            // 3. Queue-itに「変数をチェックして判定して！」と命令する
            window.queueViewModel.trigger();
            
            alert('isClicked is now true. Queue-it will now evaluate the trigger.');
        } else {
            alert('Queue-it script not found.');
        }
    });
</script>

</body>
</html>
